<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ticket Management - IT Support Ticket System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="../css/styles.css" rel="stylesheet">
    <style>
        body {
            overflow-x: hidden;
            background-color: #f8f9fa;
        }

        #sidebar {
            min-width: 250px;
            max-width: 250px;
            min-height: 100vh;
            background: #343a40;
            color: #fff;
            transition: all 0.3s;
            box-shadow: 3px 0 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }

        #sidebar .navbar-brand {
            padding: 20px 15px;
            font-size: 1.5rem;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        #sidebar .nav-link {
            padding: 15px;
            color: rgba(255, 255, 255, 0.75);
            border-left: 3px solid transparent;
            transition: all 0.2s;
            font-size: 1.05rem;
        }

        #sidebar .nav-link:hover {
            color: #fff;
            background: rgba(255, 255, 255, 0.1);
        }

        #sidebar .nav-link.active {
            color: #fff;
            background: rgba(255, 255, 255, 0.1);
            border-left: 3px solid #0d6efd;
        }

        #sidebar .nav-link i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        #content {
            width: 100%;
            min-height: 100vh;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
        }

        #user-dropdown {
            background: rgba(255, 255, 255, 0.05);
            margin-top: auto;
            padding: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .main-content {
            flex: 1;
            padding: 20px;
        }

        .dropdown-menu-dark {
            background-color: #2c3136;
            border: none;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
        }

        .dropdown-item {
            padding: 8px 15px;
            transition: all 0.2s;
        }

        .dropdown-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        /* Status badge styles */
        .badge-open {
            background-color: #ffc107;
            color: #000;
        }

        .badge-in-progress {
            background-color: #17a2b8;
            color: #fff;
        }

        .badge-resolved {
            background-color: #28a745;
            color: #fff;
        }

        .badge-closed {
            background-color: #6c757d;
            color: #fff;
        }

        /* Priority badge styles */
        .badge-low {
            background-color: #28a745;
            color: #fff;
        }

        .badge-medium {
            background-color: #ffc107;
            color: #000;
        }

        .badge-high {
            background-color: #dc3545;
            color: #fff;
        }

        .comment-container {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .comment-user {
            font-weight: bold;
        }

        .comment-date {
            color: #6c757d;
        }

        .comment-text {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
        }

        .table .avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 500;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
<div class="d-flex">
    <!-- Sidebar Navigation -->
    <div id="sidebar" class="d-flex flex-column">
        <a class="navbar-brand text-center border-bottom pb-3" href="dashboard.html">
            <i class="bi bi-shield-lock me-2"></i>Admin Panel
        </a>
        <ul class="nav flex-column mt-3">
            <li class="nav-item">
                <a class="nav-link" href="dashboard.html">
                    <i class="bi bi-speedometer2"></i> Dashboard
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="users.html">
                    <i class="bi bi-people"></i> Users
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link active" href="tickets.html">
                    <i class="bi bi-ticket-perforated"></i> Tickets
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="reports.html">
                    <i class="bi bi-graph-up"></i> Reports
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="settings.html">
                    <i class="bi bi-gear"></i> Settings
                </a>
            </li>
        </ul>

        <!-- User dropdown moved to bottom of sidebar -->
        <div class="mt-auto" id="user-dropdown">
            <div class="dropdown">
                <a class="nav-link dropdown-toggle text-white d-flex align-items-center" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown">
                    <i class="bi bi-person-circle me-2"></i>
                    <span id="username">Admin</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-dark w-100">
                    <li><a class="dropdown-item" href="profile.html"><i class="bi bi-person me-2"></i> Profile</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="../user/dashboard.html"><i class="bi bi-arrows-angle-contract me-2"></i> User View</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="#" id="logout-btn"><i class="bi bi-box-arrow-right me-2"></i> Logout</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Page Content -->
    <div id="content">
        <!-- Main Content -->
        <div class="container-fluid py-4 main-content">
            <div class="row mb-4">
                <div class="col-md-6">
                    <h2><i class="bi bi-ticket-perforated me-2"></i>Ticket Management</h2>
                    <p class="text-muted">View, assign and manage support tickets</p>
                </div>
                <div class="col-md-6 text-end">
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createTicketModal">
                        <i class="bi bi-plus-circle me-1"></i> Create Ticket
                    </button>
                    <button type="button" class="btn btn-outline-primary ms-2">
                        <i class="bi bi-download me-1"></i> Export
                    </button>
                </div>
            </div>

            <!-- Filter and Search -->
            <div class="row mb-4">
                <div class="col-md-12">
                    <div class="card shadow-sm">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Advanced Filters</h5>
                        </div>
                        <div class="card-body">
                            <form id="filter-form" class="row g-3">
                                <div class="col-md-2">
                                    <label for="status-filter" class="form-label">Status</label>
                                    <select class="form-select" id="status-filter">
                                        <option value="">All Statuses</option>
                                        <option value="1">Open</option>
                                        <option value="2">In Progress</option>
                                        <option value="3">Resolved</option>
                                        <option value="4">Closed</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label for="priority-filter" class="form-label">Priority</label>
                                    <select class="form-select" id="priority-filter">
                                        <option value="">All Priorities</option>
                                        <option value="1">Low</option>
                                        <option value="2">Medium</option>
                                        <option value="3">High</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label for="type-filter" class="form-label">Type</label>
                                    <select class="form-select" id="type-filter">
                                        <option value="">All Types</option>
                                        <option value="1">Incident</option>
                                        <option value="2">Request</option>
                                        <option value="3">Question</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label for="assignee-filter" class="form-label">Assignee</label>
                                    <select class="form-select" id="assignee-filter">
                                        <option value="">All Assignees</option>
                                        <option value="unassigned">Unassigned</option>
                                        <!-- Will be populated dynamically with technicians -->
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label for="date-range" class="form-label">Date Range</label>
                                    <select class="form-select" id="date-range">
                                        <option value="">All Time</option>
                                        <option value="today">Today</option>
                                        <option value="week">This Week</option>
                                        <option value="month">This Month</option>
                                        <option value="custom">Custom Range</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label for="search-tickets" class="form-label">Search</label>
                                    <input type="text" class="form-control" id="search-tickets" placeholder="Search tickets...">
                                </div>
                                <div class="col-12 mt-3">
                                    <button type="submit" class="btn btn-primary">Apply Filters</button>
                                    <button type="button" id="clear-filters" class="btn btn-outline-secondary">Clear Filters</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tickets Table -->
            <div class="row">
                <div class="col-md-12">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover align-middle">
                                    <thead>
                                    <tr>
                                        <th style="width: 5%">ID</th>
                                        <th style="width: 25%">Title</th>
                                        <th style="width: 10%">Status</th>
                                        <th style="width: 10%">Priority</th>
                                        <th style="width: 10%">Created by</th>
                                        <th style="width: 10%">Assigned to</th>
                                        <th style="width: 12%">Created</th>
                                        <th style="width: 18%">Actions</th>
                                    </tr>
                                    </thead>
                                    <tbody id="tickets-list">
                                    <!-- Example tickets - these will be loaded dynamically -->
                                    <tr>
                                        <td>#1001</td>
                                        <td>Unable to access email account</td>
                                        <td><span class="badge badge-open">Open</span></td>
                                        <td><span class="badge badge-high">High</span></td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="avatar bg-primary me-2">JD</div>
                                                <span>John Doe</span>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <span class="text-danger"><i class="bi bi-exclamation-triangle-fill me-1"></i>Unassigned</span>
                                            </div>
                                        </td>
                                        <td>23 Mar 2025, 10:15 AM</td>
                                        <td>
                                            <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#assignTicketModal" data-ticket-id="1001">
                                                <i class="bi bi-person-plus"></i> Assign
                                            </button>
                                            <button class="btn btn-sm btn-info" data-bs-toggle="modal" data-bs-target="#ticketDetailsModal" data-ticket-id="1001">
                                                <i class="bi bi-eye"></i> View
                                            </button>
                                            <div class="dropdown d-inline-block">
                                                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                                    <i class="bi bi-three-dots"></i>
                                                </button>
                                                <ul class="dropdown-menu">
                                                    <li><a class="dropdown-item" href="#"><i class="bi bi-pencil me-2"></i>Edit</a></li>
                                                    <li><a class="dropdown-item text-danger" href="#"><i class="bi bi-trash me-2"></i>Delete</a></li>
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>#1002</td>
                                        <td>Printer not working after Windows update</td>
                                        <td><span class="badge badge-in-progress">In Progress</span></td>
                                        <td><span class="badge badge-medium">Medium</span></td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="avatar bg-success me-2">SS</div>
                                                <span>Sarah Smith</span>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="avatar bg-info me-2">TJ</div>
                                                <span>Tom Johnson</span>
                                            </div>
                                        </td>
                                        <td>22 Mar 2025, 09:30 AM</td>
                                        <td>
                                            <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#assignTicketModal" data-ticket-id="1002">
                                                <i class="bi bi-person-plus"></i> Reassign
                                            </button>
                                            <button class="btn btn-sm btn-info" data-bs-toggle="modal" data-bs-target="#ticketDetailsModal" data-ticket-id="1002">
                                                <i class="bi bi-eye"></i> View
                                            </button>
                                            <div class="dropdown d-inline-block">
                                                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                                    <i class="bi bi-three-dots"></i>
                                                </button>
                                                <ul class="dropdown-menu">
                                                    <li><a class="dropdown-item" href="#"><i class="bi bi-pencil me-2"></i>Edit</a></li>
                                                    <li><a class="dropdown-item text-danger" href="#"><i class="bi bi-trash me-2"></i>Delete</a></li>
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>#1003</td>
                                        <td>New software installation request</td>
                                        <td><span class="badge badge-resolved">Resolved</span></td>
                                        <td><span class="badge badge-low">Low</span></td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="avatar bg-warning me-2">RJ</div>
                                                <span>Robert Jackson</span>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="avatar bg-danger me-2">AL</div>
                                                <span>Amy Lee</span>
                                            </div>
                                        </td>
                                        <td>21 Mar 2025, 02:45 PM</td>
                                        <td>
                                            <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#assignTicketModal" data-ticket-id="1003">
                                                <i class="bi bi-person-plus"></i> Reassign
                                            </button>
                                            <button class="btn btn-sm btn-info" data-bs-toggle="modal" data-bs-target="#ticketDetailsModal" data-ticket-id="1003">
                                                <i class="bi bi-eye"></i> View
                                            </button>
                                            <div class="dropdown d-inline-block">
                                                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                                    <i class="bi bi-three-dots"></i>
                                                </button>
                                                <ul class="dropdown-menu">
                                                    <li><a class="dropdown-item" href="#"><i class="bi bi-pencil me-2"></i>Edit</a></li>
                                                    <li><a class="dropdown-item text-danger" href="#"><i class="bi bi-trash me-2"></i>Delete</a></li>
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- Pagination -->
                            <nav aria-label="Tickets pagination" class="mt-4">
                                <ul class="pagination justify-content-center" id="pagination">
                                    <li class="page-item disabled">
                                        <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
                                    </li>
                                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                                    <li class="page-item">
                                        <a class="page-link" href="#">Next</a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer mt-auto py-3 bg-light">
            <div class="container text-center">
                <span class="text-muted">IT Support Ticket System &copy; 2025</span>
            </div>
        </footer>
    </div>
</div>

<!-- Create Ticket Modal -->
<div class="modal fade" id="createTicketModal" tabindex="-1" aria-labelledby="createTicketModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createTicketModalLabel">Create New Ticket</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="create-ticket-form">
                    <div class="mb-3">
                        <label for="ticket-user" class="form-label">Create Ticket For</label>
                        <select class="form-select" id="ticket-user" required>
                            <option value="">Select User</option>
                            <!-- Will be populated dynamically -->
                            <option value="1">John Doe</option>
                            <option value="2">Sarah Smith</option>
                            <option value="3">Robert Jackson</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="ticket-title" class="form-label">Title</label>
                        <input type="text" class="form-control" id="ticket-title" required>
                    </div>
                    <div class="mb-3">
                        <label for="ticket-description" class="form-label">Description</label>
                        <textarea class="form-control" id="ticket-description" rows="5" required></textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="ticket-type" class="form-label">Type</label>
                            <select class="form-select" id="ticket-type" required>
                                <option value="1">Incident</option>
                                <option value="2">Request</option>
                                <option value="3">Question</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="ticket-priority" class="form-label">Priority</label>
                            <select class="form-select" id="ticket-priority" required>
                                <option value="1">Low</option>
                                <option value="2" selected>Medium</option>
                                <option value="3">High</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="ticket-assign" class="form-label">Assign To</label>
                            <select class="form-select" id="ticket-assign">
                                <option value="">Unassigned</option>
                                <!-- Will be populated dynamically with technicians -->
                                <option value="5">Tom Johnson</option>
                                <option value="8">Amy Lee</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="submit-ticket">Create Ticket</button>
            </div>
        </div>
    </div>
</div>

<!-- Assign Ticket Modal -->
<div class="modal fade" id="assignTicketModal" tabindex="-1" aria-labelledby="assignTicketModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="assignTicketModalLabel">Assign Ticket #<span id="assign-ticket-id"></span></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="assign-ticket-form">
                    <input type="hidden" id="ticket-id-to-assign">
                    <div class="mb-3">
                        <label for="technician-select" class="form-label">Select Technician</label>
                        <select class="form-select" id="technician-select" required>
                            <option value="">Choose a technician</option>
                            <!-- Will be populated dynamically -->
                            <option value="5">Tom Johnson (2 active tickets)</option>
                            <option value="8">Amy Lee (1 active ticket)</option>
                            <option value="12">Michael Chen (4 active tickets)</option>
                            <option value="15">Lisa Rodriguez (3 active tickets)</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="assignment-note" class="form-label">Assignment Note (optional)</label>
                        <textarea class="form-control" id="assignment-note" rows="3" placeholder="Add a note for the technician..."></textarea>
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="notify-technician" checked>
                        <label class="form-check-label" for="notify-technician">
                            Send email notification to technician
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="confirm-assignment">Assign Ticket</button>
            </div>
        </div>
    </div>
</div>

<!-- Ticket Details Modal -->
<div class="modal fade" id="ticketDetailsModal" tabindex="-1" aria-labelledby="ticketDetailsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ticketDetailsModalLabel">Ticket #<span id="detail-ticket-id">1001</span></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-8">
                        <!-- Ticket Information -->
                        <h4 id="detail-ticket-title">Unable to access email account</h4>
                        <div class="mb-3 mt-3">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <span class="badge badge-open" id="detail-ticket-status">Open</span>
                                    <span class="badge badge-high" id="detail-ticket-priority">High</span>
                                    <span class="badge bg-secondary" id="detail-ticket-type">Incident</span>
                                </div>
                                <div>
                                    Created: <span id="detail-ticket-created">23 Mar 2025, 10:15 AM</span>
                                </div>
                            </div>
                        </div>
                        <div class="mb-4">
                            <h5>Description</h5>
                            <p id="detail-ticket-description">I cannot access my email account since this morning. I've tried restarting my computer and resetting my password, but I still get an "invalid credentials" error message. This is impacting my ability to communicate with clients.</p>
                        </div>

                        <!-- Comments Section -->
                        <div class="card mb-3 shadow-sm">
                            <div class="card-header bg-white d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">Comments</h5>
                                <span class="badge bg-primary rounded-pill">3</span>
                            </div>
                            <div class="card-body">
                                <div id="comments-list">
                                    <!-- Comments examples -->
                                    <div class="comment-container">
                                        <div class="comment-header">
                                            <div class="comment-user">
                                                <div class="d-flex align-items-center">
                                                    <div class="avatar bg-primary me-2" style="width: 24px; height: 24px; font-size: 0.7rem;">JD</div>
                                                    John Doe
                                                </div>
                                            </div>
                                            <div class="comment-date">23 Mar 2025, 10:15 AM</div>
                                        </div>
                                        <div class="comment-text">
                                            I have tried clearing my browser cache as well, but still no success.
                                        </div>
                                    </div>

                                    <div class="comment-container">
                                        <div class="comment-header">
                                            <div class="comment-user">
                                                <div class="d-flex align-items-center">
                                                    <div class="avatar bg-info me-2" style="width: 24px; height: 24px; font-size: 0.7rem;">TJ</div>
                                                    Tom Johnson (Technician)
                                                </div>
                                            </div>
                                            <div class="comment-date">23 Mar 2025, 10:45 AM</div>
                                        </div>
                                        <div class="comment-text">
                                            I'll look into this right away. Could you confirm which email client you're using (Outlook, web browser, etc.)?
                                        </div>
                                    </div>

                                    <div class="comment-container">
                                        <div class="comment-header">
                                            <div class="comment-user">
                                                <div class="d-flex align-items-center">
                                                    <div class="avatar bg-primary me-2" style="width: 24px; height: 24px; font-size: 0.7rem;">JD</div>
                                                    John Doe
                                                </div>
                                            </div>
                                            <div class="comment-date">23 Mar 2025, 11:05 AM</div>
                                        </div>
                                        <div class="comment-text">
                                            I'm using Outlook 365 desktop application. Version 2302.
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <form id="add-comment-form">
                                        <div class="mb-3">
                                            <label for="comment-text" class="form-label">Add Comment</label>
                                            <textarea class="form-control" id="comment-text" rows="3" required></textarea>
                                        </div>
                                        <button type="submit" class="btn btn-primary">Post Comment</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <!-- Ticket Details Sidebar -->
                        <div class="card shadow-sm">
                            <div class="card-header bg-white">
                                <h5 class="mb-0">Ticket Information</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <p class="mb-2"><strong>Created by:</strong></p>
                                    <div class="d-flex align-items-center" id="detail-created-by">
                                        <div class="avatar bg-primary me-2">JD</div>
                                        <span>John Doe</span>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <p class="mb-2"><strong>Assigned to:</strong></p>
                                    <div class="d-flex align-items-center" id="detail-assigned-to">
                                        <span class="text-danger"><i class="bi bi-exclamation-triangle-fill me-1"></i>Unassigned</span>
                                    </div>
                                </div>
                                <p><strong>Last updated:</strong> <span id="detail-updated-at">23 Mar 2025, 11:05 AM</span></p>

                                <!-- Ticket Management Actions -->
                                <hr>
                                <h6>Ticket Actions</h6>
                                <div class="mb-3">
                                    <label for="update-status" class="form-label">Update Status</label>
                                    <select class="form-select" id="update-status">
                                        <option value="1" selected>Open</option>
                                        <option value="2">In Progress</option>
                                        <option value="3">Resolved</option>
                                        <option value="4">Closed</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="update-priority" class="form-label">Update Priority</label>
                                    <select class="form-select" id="update-priority">
                                        <option value="1">Low</option>
                                        <option value="2">Medium</option>
                                        <option value="3" selected>High</option>
                                    </select>
                                </div>
                                <div class="mb-3 d-grid">
                                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#assignTicketModal" data-ticket-id="1001">
                                        <i class="bi bi-person-plus me-1"></i> Assign Ticket
                                    </button>
                                </div>
                                <div class="mb-3 d-grid">
                                    <button type="button" class="btn btn-success" id="update-ticket-btn">
                                        <i class="bi bi-save me-1"></i> Update Ticket
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Ticket History -->
                        <div class="card mt-3 shadow-sm">
                            <div class="card-header bg-white">
                                <h5 class="mb-0">Ticket History</h5>
                            </div>
                            <div class="card-body">
                                <ul class="list-group list-group-flush" id="ticket-history">
                                    <li class="list-group-item px-0 border-0">
                                        <p class="mb-1 fw-bold">Status changed to "Open"</p>
                                        <small class="text-muted">By System • 23 Mar 2025, 10:15 AM</small>
                                    </li>
                                    <li class="list-group-item px-0 border-0">
                                        <p class="mb-1 fw-bold">Ticket created</p>
                                        <small class="text-muted">By John Doe • 23 Mar 2025, 10:15 AM</small>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Simple script to populate ticket ID for assignment modal
    document.addEventListener('DOMContentLoaded', function() {
        // For assign ticket modal
        const assignTicketModal = document.getElementById('assignTicketModal');
        if (assignTicketModal) {
            assignTicketModal.addEventListener('show.bs.modal', function(event) {
                const button = event.relatedTarget;
                const ticketId = button.getAttribute('data-ticket-id');
                document.getElementById('assign-ticket-id').textContent = ticketId;
                document.getElementById('ticket-id-to-assign').value = ticketId;
            });
        }

        // Simulate ticket assignment
        const confirmAssignmentBtn = document.getElementById('confirm-assignment');
        if (confirmAssignmentBtn) {
            confirmAssignmentBtn.addEventListener('click', function() {
                const ticketId = document.getElementById('ticket-id-to-assign').value;
                const technicianId = document.getElementById('technician-select').value;
                const technicianName = document.getElementById('technician-select').options[document.getElementById('technician-select').selectedIndex].text.split(' (')[0];

                if (!technicianId) {
                    alert('Please select a technician');
                    return;
                }

                // Here you would normally make an API call to update the ticket
                alert(`Ticket #${ticketId} has been assigned to ${technicianName}`);

                // Close the modal
                const modal = bootstrap.Modal.getInstance(document.getElementById('assignTicketModal'));
                modal.hide();

                // In a real app, you would refresh the ticket list or update the DOM
            });
        }
    });
</script>
</body>
</html>